<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Panel de tr√°fico en peajes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="page-header">
    <h1>Panel de tr√°fico en peajes</h1>
    <p>Gr√°ficos construidos a partir de <code>resumen_graficas.json</code></p>
  </header>

  <div class="layout">
    <!-- Sidebar de navegaci√≥n -->
    <nav class="sidebar">
      <h2 class="sidebar-title">Secciones</h2>
      <button class="nav-button active" data-target="view-eda">
        An√°lisis exploratorio
      </button>
      <button class="nav-button" data-target="view-models">
        Modelos predictivos
      </button>
      <button class="nav-button" data-target="view-mockup">
        Mock up
      </button>
    </nav>

    <!-- Contenido principal (cambia seg√∫n la vista) -->
    <main class="main-content">
      <!-- Vista 1: An√°lisis exploratorio -->
      <section id="view-eda" class="view-section active">
        <div class="container">
          <div id="error" class="error-message" style="display: none;">
            No se pudo cargar <code>resumen_graficas.json</code>. Verifica que exista
            en la misma carpeta que este archivo HTML.
          </div>

          <section class="grid">
            <!-- Gr√°fico 1 -->
            <article class="card">
              <h2>Tr√°fico mensual total</h2>
              <p>Evoluci√≥n del tr√°fico total (Sentido 1+2 con exentos) para todos los peajes.</p>

              <!-- Selector de a√±o -->
              <div class="year-switch">
                <label for="yearSelect">A√±o:&nbsp;</label>
                <select id="yearSelect"></select>
              </div>

              <div class="chart-wrapper">
                <canvas id="chart1"></canvas>
              </div>
            </article>

            <!-- Gr√°fico 2 -->
            <article class="card">
              <h2>Top 10 peajes por tr√°fico</h2>
              <p>Peajes con mayor tr√°fico acumulado (Sentido 1+2 con exentos).</p>
              <div class="chart-wrapper">
                <canvas id="chart2"></canvas>
              </div>
            </article>

            <!-- Gr√°fico 3 -->
            <article class="card">
              <h2>Distribuci√≥n de exentos</h2>
              <p>Proporci√≥n de veh√≠culos exentos por categor√≠a (I‚ÄìVII).</p>
              <div class="chart-wrapper">
                <canvas id="chart3"></canvas>
              </div>
            </article>
          </section>
        </div>
      </section>

      <!-- Vista 2: Modelos predictivos -->
      <section id="view-models" class="view-section">
        <div class="container">
          <section class="grid grid-models">
            <!-- 1. Resumen de modelos -->
            <article class="card">
              <h2>Resumen de modelos</h2>
              <p>
                Desempe√±o global de los modelos de √°rboles de decisi√≥n/XGBoost
                entrenados para cada peaje y sentido.
              </p>
              <div id="models-summary-text" class="small-text">
                Cargando resumen de modelos...
              </div>
              <div class="chart-wrapper">
                <canvas id="models-summary-chart"></canvas>
              </div>
            </article>

            <!-- 2. Datos de trafico_limpio -->
            <article class="card">
              <h2>Datos de tr√°fico (trafico_limpio)</h2>
              <p>
                Comportamiento agregado a partir de <code>trafico_limpio.csv</code>.
                Puedes ver un promedio general o filtrar por peaje y sentido.
              </p>
              <div id="trafico-summary" class="small-text">
                Cargando informaci√≥n de <code>trafico_limpio.csv</code>...
              </div>

              <!-- üîΩ NUEVO: selector de vista / peaje / sentido -->
              <div class="selector-row trafico-selector-row">
                <div class="trafico-mode-row">
                  <label for="trafico-mode">Vista:&nbsp;</label>
                  <select id="trafico-mode">
                    <option value="general">General (todos los peajes)</option>
                    <option value="peaje-sentido">Por peaje y sentido</option>
                  </select>
                </div>
                <div class="peaje-select-row trafico-peaje-row" style="display: none;">
                  <label for="trafico-peaje-select">Peaje:&nbsp;</label>
                  <select id="trafico-peaje-select"></select>
                </div>
                <div class="sentido-select-row trafico-sentido-row" style="display: none;">
                  <label for="trafico-sentido-select">Sentido:&nbsp;</label>
                  <select id="trafico-sentido-select">
                    <option value="1">1</option>
                    <option value="2">2</option>
                  </select>
                </div>
              </div>
              <!-- üîº NUEVO -->

              <div class="chart-wrapper">
                <canvas id="trafico-chart"></canvas>
              </div>
            </article>

            <!-- 3. Modelo por peaje y sentido -->
            <article class="card">
              <h2>Detalle de modelo por peaje</h2>
              <p>
                Selecciona un peaje y un sentido para ver las m√©tricas del modelo y
                una comparaci√≥n visual entre valores reales y predichos.
              </p>

              <div class="selector-row">
                <div class="peaje-select-row">
                  <label for="peaje-select">Peaje:&nbsp;</label>
                  <select id="peaje-select"></select>
                </div>
                <div class="sentido-select-row">
                  <label for="sentido-select">Sentido:&nbsp;</label>
                  <select id="sentido-select">
                    <option value="1">1</option>
                    <option value="2">2</option>
                  </select>
                </div>
              </div>

              <div id="peaje-model-summary" class="small-text">
                Selecciona un peaje para ver su modelo.
              </div>

              <div class="chart-wrapper">
                <canvas id="peaje-model-chart"></canvas>
              </div>
            </article>
          </section>
        </div>
      </section>

      <!-- Vista 3: Mock up -->
      <section id="view-mockup" class="view-section">
        <div class="container">
          <div class="placeholder-card mockup-area">
            <h2>Mock up de la soluci√≥n</h2>
            <p>
              Esta secci√≥n est√° reservada para el mock up de la interfaz o prototipo
              de la herramienta que visualizar√° o gestionar√° los datos de tr√°fico.
            </p>
            <p class="placeholder-note">
              M√°s adelante podr√°s incrustar:
            </p>
            <ul class="placeholder-list">
              <li>Capturas o im√°genes del mock up.</li>
              <li>Un iframe con un prototipo interactivo (Figma, HTML, etc.).</li>
              <li>Componentes de UI ya implementados en HTML/CSS/JS.</li>
            </ul>
            <div class="mockup-placeholder-box">
              √Årea reservada para el mock up<br />
              (imagen, iframe, componentes, etc.)
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <footer>
    Datos consolidados multi-a√±o ¬∑ Proyecto peajes UTPN
  </footer>

  <!-- Librer√≠a Chart.js desde CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Tu script principal -->
  <script src="main.js"></script>
</body>
</html>
